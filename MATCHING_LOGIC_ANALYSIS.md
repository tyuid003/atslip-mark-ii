# ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå Logic ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà (Matching Logic Analysis)

## üìã ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

```
Transaction ID: txn-1772281080731-50d4xt7
Tenant ID: 4aeac5a3-fef3-476c-b525-4bce7aab780c
Slip Ref: A2a06b4fb80004959
Amount: 30 THB
Status: matched

matched_user_id: 19546.0 ‚ùå (‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á - ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô UUID ‡∏´‡∏£‡∏∑‡∏≠ NULL)
matched_username: "‡∏°‡∏¥‡πà‡∏á‡∏Ç‡∏ß‡∏±‡∏ç ‡∏ß‡∏á‡∏©‡∏≤‡πÄ‡∏ó‡∏û" ‚ö†Ô∏è (‡∏ä‡∏∑‡πà‡∏≠ sender ‡∏à‡∏≤‡∏Å‡∏™‡∏•‡∏¥‡∏õ)

Sender:
- Name (TH): "‡∏°‡∏¥‡πà‡∏á‡∏Ç‡∏ß‡∏±‡∏ç ‡∏ß"
- Name (EN): "Mingkwan W"
- Bank: ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏£‡∏∏‡∏á‡πÑ‡∏ó‡∏¢ (KTB)
- Account: XXX-X-XX396-6

Receiver:
- Name (TH): "‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß ‡∏ö‡∏∏‡∏ç‡∏®‡∏£‡∏µ ‡∏ä"
- Name (EN): "Boonsri C"
- Bank: ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏™‡∏¥‡∏ô (GSB)
- Account: XXX-X-XX292-133
```

---

## ‚úÖ Logic ‡∏Å‡∏≤‡∏£ Match Receiver (‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á)

### Flow ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:

1. **Match ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ (Bank) - ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö**
   ```typescript
   // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ receiver ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ç‡∏≠‡∏á tenant ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
   bankMatched = receiverBankVariants.some(rv =>
     accountBankVariants.some(av => av.includes(rv) || rv.includes(av))
   );
   
   if (!bankMatched) continue; // ‡∏Ç‡πâ‡∏≤‡∏°‡∏ñ‡πâ‡∏≤‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á
   ```

2. **Match ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ (Account Number) - ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 1**
   ```typescript
   // ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ (‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ 3 ‡∏´‡∏•‡∏±‡∏Å)
   if (accountNumber.length >= 3 && receiverAccountClean.length >= 3) {
     for (let i = 0; i <= receiverAccountClean.length - 3; i++) {
       const substring = receiverAccountClean.substring(i, i + 3);
       if (accountNumber.includes(substring)) {
         accountMatched = true;
         break;
       }
     }
   }
   ```

3. **Match ‡∏ä‡∏∑‡πà‡∏≠ (Account Name) - ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 2**
   ```typescript
   // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á ‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠ (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©)
   if (!accountMatched && (receiverNameTh || receiverNameEn)) {
     // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
     if (receiverNameTh && accountNameTh) {
       if (matchName(receiverNameTh, accountNameTh, 4)) {
         nameMatched = true;
       }
     }
     
     // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©
     if (!nameMatched && receiverNameEn && accountNameEn) {
       if (matchName(receiverNameEn, accountNameEn, 4)) {
         nameMatched = true;
       }
     }
   }
   ```

4. **Decision: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠**
   ```typescript
   if (bankMatched && (accountMatched || nameMatched)) {
     return tenant; // ‚úÖ Match ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
   }
   ```

### ‡∏™‡∏£‡∏∏‡∏õ Logic ‡∏Å‡∏≤‡∏£ Match Receiver:

**‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç:** `‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ï‡∏£‡∏á AND (‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ï‡∏£‡∏á OR ‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏á)`

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà Match:**
- ‚úÖ GSB + ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ 292-133 ‡∏ï‡∏£‡∏á ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
- ‚úÖ GSB + ‡∏ä‡∏∑‡πà‡∏≠ "‡∏ö‡∏∏‡∏ç‡∏®‡∏£‡∏µ" ‡∏ï‡∏£‡∏á (4 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ) ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
- ‚ùå GSB + ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á + ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á ‚Üí ‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
- ‚ùå SCB (‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ú‡∏¥‡∏î) + ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡∏£‡∏á ‚Üí ‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å

**Logic ‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢** ‚úÖ

---

## ‚ö†Ô∏è ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏≤‡∏£ Match Sender (‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ö‡∏Å‡∏û‡∏£‡πà‡∏≠‡∏á)

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö:

#### 1. **matched_user_id ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ (19546.0)**

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:**
```typescript
// ‡πÉ‡∏ô scan.ts ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 220
matchedUser?.id || null
```

- Admin API ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ `user.id` ‡πÄ‡∏õ‡πá‡∏ô **number** (19546.0)
- Database ‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á **string** (UUID) ‡∏´‡∏£‡∏∑‡∏≠ **NULL**
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å number ‡∏•‡∏á‡πÑ‡∏õ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏õ‡∏•‡∏á ‚Üí ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î

**‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Response ‡∏à‡∏≤‡∏Å Admin API:**
```json
{
  "list": [
    {
      "id": 19546,              // ‚Üê Number, ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà UUID
      "username": "user123",
      "fullname": "‡∏°‡∏¥‡πà‡∏á‡∏Ç‡∏ß‡∏±‡∏ç ‡∏ß‡∏á‡∏©‡∏≤‡πÄ‡∏ó‡∏û",
      "phone": "0812345678",
      ...
    }
  ]
}
```

#### 2. **matched_username ‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏≤‡∏Å Admin API**

**‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:**
```typescript
// ‡πÉ‡∏ô scan.ts ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 221
matchedUser?.fullname || null
```

- ‡∏ñ‡πâ‡∏≤ Admin API ‡∏°‡∏µ user ‡∏ä‡∏∑‡πà‡∏≠ "‡∏°‡∏¥‡πà‡∏á‡∏Ç‡∏ß‡∏±‡∏ç ‡∏ß‡∏á‡∏©‡∏≤‡πÄ‡∏ó‡∏û" ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏µ‡πâ
- **‡∏ô‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á** ‡∏ñ‡πâ‡∏≤ Admin API ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á
- ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏≤‡∏Å sender ("‡∏°‡∏¥‡πà‡∏á‡∏Ç‡∏ß‡∏±‡∏ç ‡∏ß") ‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ö user ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö ‚Üí ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πá‡∏à‡∏∞ match

#### 3. **‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Sender ‡πÅ‡∏ö‡∏ö Fuzzy**

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:**
```typescript
// ‡πÉ‡∏ô scan.service.ts
searchUrl = `${adminApiUrl}/api/users/list?search=${encodeURIComponent(name)}`;
```

- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢ **‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°** ‡∏à‡∏≤‡∏Å‡∏™‡∏•‡∏¥‡∏õ ("‡∏°‡∏¥‡πà‡∏á‡∏Ç‡∏ß‡∏±‡∏ç ‡∏ß")
- Admin API ‡∏≠‡∏≤‡∏à‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ user ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡∏Å‡∏±‡∏ô
- **‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°** (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ, ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£)

---

## üîß ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

### ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ matched_user_id:

**Option 1: ‡πÉ‡∏ä‡πâ username ‡πÅ‡∏ó‡∏ô id**
```typescript
// ‡πÉ‡∏ô scan.ts ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 220-221
matchedUser?.username || null,  // ‡πÉ‡∏ä‡πâ username ‡πÅ‡∏ó‡∏ô id
matchedUser?.fullname || null,
```

**Option 2: ‡πÅ‡∏õ‡∏•‡∏á id ‡πÄ‡∏õ‡πá‡∏ô string**
```typescript
matchedUser?.id ? String(matchedUser.id) : null,
matchedUser?.fullname || null,
```

**Option 3: ‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏±‡πâ‡∏á id ‡πÅ‡∏•‡∏∞ username**
```sql
-- ‡πÅ‡∏Å‡πâ schema ‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ü‡∏¥‡∏•‡∏î‡πå
ALTER TABLE pending_transactions 
ADD COLUMN matched_username_id TEXT;  -- ‡πÄ‡∏Å‡πá‡∏ö id ‡∏à‡∏≤‡∏Å Admin API
-- matched_user_id ‡πÄ‡∏Å‡πá‡∏ö username
```

### ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£ Match Sender:

**‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:**
```typescript
// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏î‡πâ‡∏ß‡∏¢ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
const matchedBySenderAccount = senderAccount 
  ? users.find(u => u.bank_account?.includes(senderAccount.slice(-4)))
  : null;

// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏î‡πâ‡∏ß‡∏¢ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
const matchedBySenderPhone = senderPhone
  ? users.find(u => u.phone === senderPhone)
  : null;

// ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å match ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
return matchedBySenderAccount || matchedBySenderPhone || matchedByName;
```

---

## üìä ‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞

### ‚úÖ Logic ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:
1. **Receiver Matching** - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ + (‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ OR ‡∏ä‡∏∑‡πà‡∏≠) ‚úÖ
2. **Bank Account Caching** - ‡πÉ‡∏ä‡πâ KV ‡πÑ‡∏°‡πà‡∏°‡∏µ TTL ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏î‡∏ä‡πà‡∏ß‡∏á ‚úÖ
3. **Duplicate Detection** - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö slip_ref ‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ‚úÖ

### ‚ö†Ô∏è ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ:
1. **matched_user_id** - ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô string ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ username
2. **Sender Matching** - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ/‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£
3. **Data Validation** - ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ matched_user_id ‡πÄ‡∏õ‡πá‡∏ô UUID ‡∏à‡∏£‡∏¥‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å

### üí° ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:
1. ‡πÉ‡∏ä‡πâ **username** ‡πÅ‡∏ó‡∏ô **id** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
2. ‡πÄ‡∏û‡∏¥‡πà‡∏° **confidence score** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£ match sender (0-100%)
3. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å **matching_method** ‡∏ß‡πà‡∏≤‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡∏¥‡∏ò‡∏µ‡πÑ‡∏´‡∏ô (by_account, by_name, by_phone)
4. ‡πÄ‡∏û‡∏¥‡πà‡∏° **manual_review** flag ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà confidence ‡∏ï‡πà‡∏≥

---

## üéØ ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°

### ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°: "‡∏ñ‡πâ‡∏≤‡∏´‡∏≤‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ, ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á receiver ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ç‡∏≠‡∏á tenant ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á D1 ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà"

**‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö: ‡πÉ‡∏ä‡πà ‚úÖ**

**‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç:**
1. **‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô** (‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)
2. **‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô** (‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ 3 ‡∏´‡∏•‡∏±‡∏Å) **‡∏´‡∏£‡∏∑‡∏≠** **‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô** (‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ 4 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£)

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
- Receiver: GSB, 292-133, "‡∏ö‡∏∏‡∏ç‡∏®‡∏£‡∏µ ‡∏ä"
- Tenant Account: GSB, 020480292133, "‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß ‡∏ö‡∏∏‡∏ç‡∏®‡∏£‡∏µ ‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏û‡∏ô‡∏≤"
- ‚úÖ **‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å** ‡πÄ‡∏û‡∏£‡∏≤‡∏∞:
  - ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ï‡∏£‡∏á: GSB ‚úÖ
  - ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ï‡∏£‡∏á: "292133" ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô 6 ‡∏´‡∏•‡∏±‡∏Å ‚úÖ
  - ‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏á: "‡∏ö‡∏∏‡∏ç‡∏®‡∏£‡∏µ" ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô ‚úÖ

**‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å:**
- ‚ùå ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô (GSB vs SCB)
- ‚ùå ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡πÅ‡∏ï‡πà‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡∏∞‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á
- ‚ùå ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÅ‡∏•‡∏∞‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 4 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£

**‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢:**
- Logic ‡∏ô‡∏µ‡πâ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏¥‡∏î tenant ‚úÖ
- ‡πÅ‡∏°‡πâ‡∏à‡∏∞‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢ tenant ‡πÉ‡∏ä‡πâ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡∏Å‡πá‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏á‡∏î‡πâ‡∏ß‡∏¢
- ‡∏´‡∏≤‡∏Å tenant A (GSB-111) ‡πÅ‡∏•‡∏∞ tenant B (GSB-222) ‡∏™‡∏•‡∏¥‡∏õ‡πÑ‡∏õ‡∏ó‡∏µ‡πà GSB-111 ‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏Ñ‡πà tenant A ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

